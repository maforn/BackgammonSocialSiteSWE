# Backgammon Social Site

This project is a web application for playing backgammon online, allowing two players or a player against an intelligent agent (bot) to compete. The platform also enables tournament organization among players and features a leaderboard updated with personal scores.

[![Quality gate](https://aminsep.disi.unibo.it/sonarqube/api/project_badges/quality_gate?project=SWE-team-3-backgammon-social-site&token=sqb_065b31a13f0c6fa4084d8a65d62724ac761e6f18)](https://aminsep.disi.unibo.it/sonarqube/dashboard?id=SWE-team-3-backgammon-social-site)

### General Ratings
[![Maintainability Rating](https://aminsep.disi.unibo.it/sonarqube/api/project_badges/measure?project=SWE-team-3-backgammon-social-site&metric=sqale_rating&token=sqb_065b31a13f0c6fa4084d8a65d62724ac761e6f18)](https://aminsep.disi.unibo.it/sonarqube/dashboard?id=SWE-team-3-backgammon-social-site) [![Reliability Rating](https://aminsep.disi.unibo.it/sonarqube/api/project_badges/measure?project=SWE-team-3-backgammon-social-site&metric=reliability_rating&token=sqb_065b31a13f0c6fa4084d8a65d62724ac761e6f18)](https://aminsep.disi.unibo.it/sonarqube/dashboard?id=SWE-team-3-backgammon-social-site) [![Security Rating](https://aminsep.disi.unibo.it/sonarqube/api/project_badges/measure?project=SWE-team-3-backgammon-social-site&metric=security_rating&token=sqb_065b31a13f0c6fa4084d8a65d62724ac761e6f18)](https://aminsep.disi.unibo.it/sonarqube/dashboard?id=SWE-team-3-backgammon-social-site)

### Code Review 
[![Coverage](https://aminsep.disi.unibo.it/sonarqube/api/project_badges/measure?project=SWE-team-3-backgammon-social-site&metric=coverage&token=sqb_065b31a13f0c6fa4084d8a65d62724ac761e6f18)](https://aminsep.disi.unibo.it/sonarqube/dashboard?id=SWE-team-3-backgammon-social-site) [![Duplicated Lines (%)](https://aminsep.disi.unibo.it/sonarqube/api/project_badges/measure?project=SWE-team-3-backgammon-social-site&metric=duplicated_lines_density&token=sqb_065b31a13f0c6fa4084d8a65d62724ac761e6f18)](https://aminsep.disi.unibo.it/sonarqube/dashboard?id=SWE-team-3-backgammon-social-site) [![Lines of Code](https://aminsep.disi.unibo.it/sonarqube/api/project_badges/measure?project=SWE-team-3-backgammon-social-site&metric=ncloc&token=sqb_065b31a13f0c6fa4084d8a65d62724ac761e6f18)](https://aminsep.disi.unibo.it/sonarqube/dashboard?id=SWE-team-3-backgammon-social-site)

### Other Factors
[![Bugs](https://aminsep.disi.unibo.it/sonarqube/api/project_badges/measure?project=SWE-team-3-backgammon-social-site&metric=bugs&token=sqb_065b31a13f0c6fa4084d8a65d62724ac761e6f18)](https://aminsep.disi.unibo.it/sonarqube/dashboard?id=SWE-team-3-backgammon-social-site) [![Code Smells](https://aminsep.disi.unibo.it/sonarqube/api/project_badges/measure?project=SWE-team-3-backgammon-social-site&metric=code_smells&token=sqb_065b31a13f0c6fa4084d8a65d62724ac761e6f18)](https://aminsep.disi.unibo.it/sonarqube/dashboard?id=SWE-team-3-backgammon-social-site) [![Security Hotspots](https://aminsep.disi.unibo.it/sonarqube/api/project_badges/measure?project=SWE-team-3-backgammon-social-site&metric=security_hotspots&token=sqb_065b31a13f0c6fa4084d8a65d62724ac761e6f18)](https://aminsep.disi.unibo.it/sonarqube/dashboard?id=SWE-team-3-backgammon-social-site) [![Technical Debt](https://aminsep.disi.unibo.it/sonarqube/api/project_badges/measure?project=SWE-team-3-backgammon-social-site&metric=sqale_index&token=sqb_065b31a13f0c6fa4084d8a65d62724ac761e6f18)](https://aminsep.disi.unibo.it/sonarqube/dashboard?id=SWE-team-3-backgammon-social-site) [![Vulnerabilities](https://aminsep.disi.unibo.it/sonarqube/api/project_badges/measure?project=SWE-team-3-backgammon-social-site&metric=vulnerabilities&token=sqb_065b31a13f0c6fa4084d8a65d62724ac761e6f18)](https://aminsep.disi.unibo.it/sonarqube/dashboard?id=SWE-team-3-backgammon-social-site) 

## Table of Contents
- [Introduction](#introduction)
- [Project Features](#project-features)
- [Team Roles](#team-roles)
- [Working Methodology](#working-methodology)
- [Architecture and Technologies](#architecture-and-technologies)
- [Pipeline Explaination](#pipeline-explaination)
- [Installation Instructions](#installation-instructions)
- [Contributions and Conventions](#contributions-and-conventions)

## Introduction
Sprint Zero was essential for planning the project, outlining the main features, establishing communication foundations, and structuring the backlog of user stories necessary for the development sprints.  
The tests are covering over 90% of the code, which is long over 10k lines!

## Project Features
- **Online Play**: Compete in backgammon online against other users or an intelligent agent.
- **Tournaments**: Organize and participate in tournaments with up to four players.
- **Leaderboard**: Updated ranking based on personal ratings.
- **User Interface**: Simple and intuitive UI designed for an optimal gaming experience.
- **Communication**: Notifications and messaging for tournaments and challenges.

## Team Roles
- **Scrum Master**: [Cristian Orsi](mailto:cristiam.orsi2@studio.unibo.it)
- **Product Owner**: [Enis Brajevic](mailto:enis.brajevic@studio.unibo.it)
- **Developer 1**: [Matteo Fornaini](mailto:matteo.fornaini@studio.unibo.it)
- **Developer 2**: [Mattia Ferrarini](mailto:mattia.ferrarini3@studio.unibo.it)
- **Developer 3**: [Enrico Mazzotti](mailto:enrico.mazzotti2@studio.unibo.it)
- **Developer 4**: [Lorenzo Giarrusso](mailto:lorenzo.giarrusso@studio.unibo.it)

## Working Methodology
The team works five days a week, with flexible hours for each member. Communication occurs via Mattermost for messaging and Microsoft Teams for video calls, while English is the primary language for code and technical documentation.

## Architecture and Technologies
The project is divided into three main components:
- **Frontend**: Developed in Vue.js.
- **Backend**: Developed in Python using FastAPI.
- **Database**: Manages data for users, tournaments, and rankings.

### Docker
The project utilizes a multi-stage Dockerfile for container management:
- **Frontend Stage**: Builds the Vue app to generate static files.
- **Backend Stage**: Configures and runs the Python application, serving the static frontend files and managing APIs.

## Pipeline Explaination
We setup two Gitlab runners on private servers to handle the CI/CD.  
The GitLab CI/CD pipeline automates the build, test, and security analysis process using Docker and SonarQube:

1. **Build Stage:**  
   - Builds backend (`server`) and frontend (`client`) Docker services.
   - Starts MongoDB as a database service.

2. **Test Stage:**  
   - Runs backend tests with `pytest` and frontend tests with `npm run test`.

3. **SonarQube Check:**  
   - Performs static code analysis using SonarQube.
   - Runs on key branches and allows failures gracefully.

4. **SonarQube Vulnerability Report:**  
   - Exports a security report from SonarQube.
   - Saves it as a GitLab artifact for review.

## Installation Instructions

1. Clone the repository:
   ```bash
   git clone https://aminsep.disi.unibo.it/gitlab/swe-team-3/backgammon-social-site.git
   cd backgammon-social-site
   ```
2. If you want to test you can proceed on this branch, else switch to deploy/main
   ```bash
   git checkout deploy/main
   ```

3. Copy the `.env.example` files to `.env` and edit their content to contain the right variables, such as your hostname, google password and secret and so on
   ```bash
   cp server/.env.example server/.env
   cp client/.env.example client/.env
   vim server/.env # or use any ide to edit the file
   vim client/.env # or use any ide to edit the file
   ```

4. Create and start environment:
   - if you are in the deploy/main you can start the docker container with
      ```bash
      docker compose up --build deploy
      ```
      use `-d` to start it as a daemon and keep it running
   - if you are in the main branch you have to start the mongodb daemon, open two terminals and start server and client one with
      ```bash
      # inside the client terminal
      cd client
      npm install
      npm run dev
      ```
      and inside the server one with
      ```bash
      # inside the server terminal
      cd server
      python -m venv venv
      source venv/bin/activate
      pip install -r requirements.txt
      python main.py
      ```

5. Access the app: The application will be available at either the specified url if you are deploying or a server or at [localhost:5173](http://localhost:5173) for the client and [localhost:8000](http://localhost:8000) for the server api.

## Contributions and Conventions

- **Language**: English for code and documentation.
- **Versioning**:
  - Branching workflow: Use prefixes (`feature/`, `bugfix/`, `docs/`).
  - Branch naming: Lowercase, separated by hyphens (e.g., `feature/game-board`).
  - Commit messages: In imperative form (e.g., `Add login endpoint`).
  - Merging to main: Requires positive review from another team member.
